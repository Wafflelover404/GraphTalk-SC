# Интерпретация NLP JSON и интеграция с LLM

Этот документ описывает процесс интерпретации естественного языка (ЕЯ) в машинно-читаемый формат JSON и загрузки его в SC-память с использованием скрипта `json-interpreter.py`. Также рассматривается интеграция этого процесса с большими языковыми моделями (LLM) для автоматического извлечения знаний.

---

## Обзор

Конвейер NLP состоит из следующих шагов:

1. **Входные данные естественного языка:**  
   Пользователь предоставляет текст на любом языке (например, русском, английском, испанском).

2. **Формализация JSON:**  
   Текст преобразуется в структурированный формат JSON, где:
   - Отношения представлены глагольными фразами (например, "Поступить в", "Учиться на").
   - Узлы и объекты находятся в именительном падеже.
   - Исходное предложение сохраняется как `"Source content"`.

3. **Загрузка в SC-память:**  
   Скрипт `json-interpreter.py` читает JSON и создает семантические узлы и отношения в SC-памяти, прикрепляя исходный текст как метку к каждому узлу.

---

## Пример: Вывод журнала

Ниже приведен образец журнала выполнения `json-interpreter.py` на русскоязычном входе:

```
--- Подробный журнал ---
Узел существует: source_content (из 'Source content') -> ScAddr(262154) | Метка прикреплена
Ссылка исходного содержимого прикреплена: Вчера я поступил в БГУ, а сегодня я поступил в МГУ. Я учусь на факультете математики и физики в БГУ, а в МГУ на факультете информатики. Я живу в Минске и Москве.
Узел создан: postupit_v (из 'Поступить в') -> ScAddr(262302) | Метка прикреплена
Узел создан: ia (из 'я') -> ScAddr(262306) | Метка прикреплена
Узел создан: bgu (из 'БГУ') -> ScAddr(262310) | Метка прикреплена
Отношение создано: я -[Поступить в]-> БГУ
Узел создан: mgu (из 'МГУ') -> ScAddr(262316) | Метка прикреплена
Отношение создано: я -[Поступить в]-> МГУ
Узел создан: uchitsia_na (из 'Учиться на') -> ScAddr(262322) | Метка прикреплена
Узел создан: ia (из 'я') -> ScAddr(262326) | Метка прикреплена
Узел создан: fakultet_matematiki_i_fiziki_v_bgu (из 'факультет математики и физики в БГУ') -> ScAddr(262330) | Метка прикреплена
Отношение создано: я -[Учиться на]-> факультет математики и физики в БГУ
Узел создан: fakultet_informatiki_v_mgu (из 'факультет информатики в МГУ') -> ScAddr(262336) | Метка прикреплена
Отношение создано: я -[Учиться на]-> факультет информатики в МГУ
Узел создан: zhit_v (из 'Жить в') -> ScAddr(262342) | Метка прикреплена
Узел создан: ia (из 'я') -> ScAddr(262346) | Метка прикреплена
Узел создан: minsk (из 'Минск') -> ScAddr(262350) | Метка прикреплена
Отношение создано: я -[Жить в]-> Минск
Узел создан: moskva (из 'Москва') -> ScAddr(262356) | Метка прикреплена
Отношение создано: я -[Жить в]-> Москва
Узел создан: bgu (из 'БГУ') -> ScAddr(262362) | Метка прикреплена
Узел создан: mgu (из 'МГУ') -> ScAddr(262366) | Метка прикреплена
Узел создан: fakultet_matematiki_i_fiziki_v_bgu (из 'факультет математики и физики в БГУ') -> ScAddr(262370) | Метка прикреплена
Узел создан: fakultet_informatiki_v_mgu (из 'факультет информатики в МГУ') -> ScAddr(262374) | Метка прикреплена
Узел создан: minsk (из 'Минск') -> ScAddr(262378) | Метка прикреплена
Узел создан: moskva (из 'Москва') -> ScAddr(262382) | Метка прикреплена
```

- Каждый узел создается с нормализованным системным идентификатором (например, `postupit_v` для `"Поступить в"`), но исходный текст всегда прикрепляется как метка.
- Отношения создаются между узлами, и все действия регистрируются.

---

## Формат JSON

Ожидаемый формат JSON следующий:

```json
{
  "Поступить в": {
    "я": ["БГУ", "МГУ"]
  },
  "Учиться на": {
    "я": [
      "факультет математики и физики в БГУ",
      "факультет информатики в МГУ"
    ]
  },
  "Жить в": {
    "я": ["Минск", "Москва"]
  },
  "membership": {
    "БГУ": [],
    "МГУ": [],
    "факультет математики и физики в БГУ": [],
    "факультет информатики в МГУ": [],
    "Минск": [],
    "Москва": []
  },
  "Source content": "Вчера я поступил в БГУ, а сегодня я поступил в МГУ. Я учусь на факультете математики и физики в БГУ, а в МГУ на факультете информатики. Я живу в Минске и Москве."
}
```

---

## Интеграция с LLM

- LLM могут использоваться для автоматического преобразования текста на естественном языке в указанный выше формат JSON.
- Затем JSON может быть загружен в SC-память с использованием скрипта-интерпретатора.
- Это обеспечивает автоматическое извлечение знаний и построение семантического графа из произвольного текста на любом языке.

---

## Использование

1. Поместите ваш JSON в `output.json`.
2. Запустите интерпретатор:
   ```
   python3 json-interpreter.py
   ```
3. Просмотрите подробный журнал для информации о том, какие узлы и отношения были созданы.

---

## См. также

- [Стандарт SC-Machine JSON](./json-prompt.md)
- [Основной README](../README.md)
